sequenceDiagram
    autonumber
    participant V as Viewer
    participant TT as TikTok Platform
    participant AF as Alert Provider (Tikfinity)
    participant BR as Browser Overlay
    participant OBS as OBS/Studio
    participant CDN as Stream CDN

    Note over V: Gift / Follow / Like
    V->>TT: Event
    TT-->>AF: Event webhook/WS (10–200ms)
    AF-->>BR: Websocket push (10–100ms)
    BR-->>BR: Render animation (1–2 frames)
    BR-->>OBS: Captured as Browser Source (1–2 frames)
    OBS-->>CDN: Encode + upload (50–300ms)
    CDN-->>V: Playback buffer (100–500ms)

    Note over BR,OBS: Foreground tab + HW accel reduces delay
    Note over TT,AF: Prefer websocket over polling

